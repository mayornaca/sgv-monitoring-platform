<!doctype html>
<html lang="es" class="no-focus">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>Nueva Contraseña - SGV</title>

    <meta name="description" content="Sistema de Gestión y Monitoreo - SGV">
    <meta name="robots" content="noindex, nofollow">

    <link rel="icon" type="image/x-icon" href="{{ asset('favicon.ico') }}" />

    {# Google Fonts #}
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Muli:300,400,400i,600,700">

    {# Webpack Encore Assets (includes jQuery, FontAwesome, and dependencies) #}
    {{ encore_entry_link_tags('app') }}

    {# Custom Legacy CSS (loaded after Encore to override styles) #}
    <link rel="stylesheet" href="{{ asset('css/auth-legacy-style.css') }}">

    <style>
        .password-requirements {
            background: #f1f5f9;
            padding: 0.75rem;
            border-radius: 0.375rem;
            margin-bottom: 1rem;
        }
        .password-requirements ul {
            margin: 0;
            padding-left: 1.25rem;
            font-size: 0.875rem;
            color: #475569;
        }
        .form-errors {
            color: #dc2626;
            font-size: 0.875rem;
            margin-top: 0.25rem;
        }
    </style>
</head>
<body>

{# Page Container #}
<div id="page-container" class="main-content-boxed">
    {# Main Container #}
    <main id="main-container">
        {# Background Image with Split Screen #}
        <div class="bg-image" style="background-image: url('{{ asset('images/auth/login-background.jpg') }}');">
            <div class="row mx-0 bg-default-op">
                {# Left Section - Image with overlay text #}
                <div class="hero-static col-md-6 col-xl-8 d-none d-md-flex align-items-md-end">
                    <div class="p-30 invisible" data-toggle="appear">
                        <p class="font-size-h3 font-w600 text-white">
                            Sistema de Gestión y Monitoreo
                        </p>
                        <p class="font-italic text-white-op d-none">
                            &copy; <span>{{ "now"|date("Y") }}</span> SGV
                        </p>
                    </div>
                </div>

                {# Right Section - New Password Form #}
                <div class="hero-static col-md-6 col-xl-4 d-flex align-items-center bg-white">
                    <div class="content content-full">
                        {# Header #}
                        <div class="px-30 py-10">
                            <a class="navbar-brand" href="{{ path('app_home') }}">
                                <img alt="Logo SGV" src="{{ asset('images/logo_w300px.png') }}" class="img-transparent-dark-bg" style="max-width: 100%;">
                            </a>
                            <h1 class="h3 font-w700 mt-30 mb-10">¡Bienvenida/o de nuevo!</h1>
                            <h2 class="h5 font-w400 text-muted mb-0">Por favor ingrese tu nueva contraseña en los dos campos a continuación.</h2>
                        </div>
                        {# END Header #}

                        {# Flash Messages #}
                        {% for message in app.flashes('error') %}
                            <div class="alert alert-danger px-30">
                                {{ message }}
                            </div>
                        {% endfor %}

                        <div class="password-requirements px-30">
                            <strong style="font-size: 0.875rem;">La contraseña debe contener:</strong>
                            <ul>
                                <li>Al menos 8 caracteres</li>
                                <li>Una letra mayúscula</li>
                                <li>Una letra minúscula</li>
                                <li>Un número</li>
                            </ul>
                        </div>

                        {# New Password Form #}
                        {{ form_start(resetForm, {'attr': {'class': 'px-30'}}) }}

                            <div class="form-group">
                                <div class="form-material floating">
                                    {{ form_widget(resetForm.plainPassword.first, {'attr': {
                                        'class': 'form-control',
                                        'placeholder': ' '
                                    }}) }}
                                    <label for="{{ resetForm.plainPassword.first.vars.id }}">Nueva contraseña</label>
                                </div>
                                {% if form_errors(resetForm.plainPassword.first) %}
                                    <div class="form-errors">
                                        {{ form_errors(resetForm.plainPassword.first) }}
                                    </div>
                                {% endif %}
                            </div>

                            <div class="form-group">
                                <div class="form-material floating">
                                    {{ form_widget(resetForm.plainPassword.second, {'attr': {
                                        'class': 'form-control',
                                        'placeholder': ' '
                                    }}) }}
                                    <label for="{{ resetForm.plainPassword.second.vars.id }}">Confirmar contraseña</label>
                                </div>
                                {% if form_errors(resetForm.plainPassword.second) %}
                                    <div class="form-errors">
                                        {{ form_errors(resetForm.plainPassword.second) }}
                                    </div>
                                {% endif %}
                            </div>

                            {% if form_errors(resetForm.plainPassword) %}
                                <div class="alert alert-danger">
                                    {{ form_errors(resetForm.plainPassword) }}
                                </div>
                            {% endif %}

                            <div class="form-group">
                                <button type="submit" class="w3-btn w3-margin-bottom" style="width: 100%;">
                                    <i class="fa fa-asterisk mr-10"></i> Guardar Contraseña
                                </button>

                                <div class="mt-30">
                                    <a class="link-effect text-muted mr-10 mb-5 d-inline-block"
                                       href="{{ path('app_login') }}">
                                        <i class="fa fa-user text-muted mr-5"></i> Iniciar Sesión
                                    </a>
                                </div>
                            </div>

                        {{ form_end(resetForm) }}
                        {# END New Password Form #}
                    </div>
                </div>
            </div>
        </div>
    </main>
</div>

{# Webpack Encore Assets (includes jQuery and dependencies) #}
{{ encore_entry_script_tags('app') }}

{# Custom Auth JavaScript (requires jQuery from Encore) #}
<script src="{{ asset('js/auth-ajax-login.js') }}"></script>

</body>
</html>
