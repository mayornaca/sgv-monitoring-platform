# =============================================================================
# SGV - Sistema de Gestión Vial
# Archivo de configuración de ejemplo
# =============================================================================
# INSTRUCCIONES:
# 1. Copiar este archivo a .env
# 2. Reemplazar todos los valores CHANGE_ME_* con valores reales
# 3. Generar secrets seguros con: openssl rand -hex 32
# =============================================================================

###> symfony/framework-bundle ###
APP_ENV=prod
APP_DEBUG=0
# Generar con: openssl rand -hex 32
APP_SECRET=CHANGE_ME_32_CHAR_HEX_SECRET
###< symfony/framework-bundle ###

###> instance configuration ###
# IDs de concesiones para esta instancia (separados por coma)
# Ejemplos: "20" (una sola), "20,22" (múltiples), "" (todas)
# Controla qué menús y logos se muestran según la concesión
INSTANCE_CONCESSIONS="22"
###< instance configuration ###

###> cronjob authentication ###
# Token para endpoints de cronjobs
# Generar con: openssl rand -hex 32
CRON_AUTH_TOKEN=CHANGE_ME_64_CHAR_HEX_TOKEN
###< cronjob authentication ###

###> doctrine/doctrine-bundle ###
# Base de datos principal MySQL
DATABASE_URL="mysql://DB_USER:DB_PASSWORD@localhost:3306/gesvial_sgv?serverVersion=8.0&charset=utf8mb4"

# Conexiones adicionales (configurar según infraestructura)
DATABASE_SISTEK_URL="mysql://USER:PASSWORD@localhost:1433/asteriskcdrdb?serverVersion=8.0&charset=utf8mb4"
DATABASE_SIV_URL="postgresql://USER:PASSWORD@localhost:5432/dbpuente?serverVersion=12&charset=utf8"
DATABASE_SIV_VS_URL="postgresql://USER:PASSWORD@IP_SERVIDOR:5432/puente_vs?serverVersion=12&charset=utf8"
DATABASE_DEV_URL="mysql://USER:PASSWORD@localhost:3306/gesvial_sgv?serverVersion=8.0&charset=utf8mb4"
DATABASE_ESPIRAS_VS_URL="postgresql://USER:PASSWORD@localhost:5432/dbpuente?serverVersion=12&charset=utf8"
DATABASE_ADQ_ESPIRAS_URL="postgresql://USER:PASSWORD@localhost:5432/dbpuente?serverVersion=12&charset=utf8"

# Variables alternativas para conexión SIV
DATABASE_SIV_HOST=localhost
DATABASE_SIV_PORT=5432
DATABASE_SIV_NAME=dbpuente
DATABASE_SIV_USER=postgres
DATABASE_SIV_PASSWORD=CHANGE_ME_DB_PASSWORD

DATABASE_SIV_VS_HOST=localhost
DATABASE_SIV_VS_PORT=5432
DATABASE_SIV_VS_NAME=dbpuente_vs
DATABASE_SIV_VS_USER=postgres
DATABASE_SIV_VS_PASSWORD=CHANGE_ME_DB_PASSWORD
###< doctrine/doctrine-bundle ###

###> lexik/jwt-authentication-bundle ###
JWT_SECRET_KEY=%kernel.project_dir%/config/jwt/private.pem
JWT_PUBLIC_KEY=%kernel.project_dir%/config/jwt/public.pem
# Generar con: openssl rand -hex 32
JWT_PASSPHRASE=CHANGE_ME_64_CHAR_HEX_PASSPHRASE
###< lexik/jwt-authentication-bundle ###

###> league/oauth2-server-bundle ###
OAUTH_PRIVATE_KEY=%kernel.project_dir%/config/jwt/private.pem
OAUTH_PUBLIC_KEY=%kernel.project_dir%/config/jwt/public.pem
OAUTH_PASSPHRASE=CHANGE_ME_64_CHAR_HEX_PASSPHRASE
# Generar con: openssl rand -base64 32
OAUTH_ENCRYPTION_KEY=CHANGE_ME_BASE64_ENCRYPTION_KEY
###< league/oauth2-server-bundle ###

###> symfony/mercure-bundle ###
# Mercure Hub (opcional, para actualizaciones en tiempo real)
MERCURE_URL=https://example.com/.well-known/mercure
MERCURE_PUBLIC_URL=https://example.com/.well-known/mercure
MERCURE_JWT_SECRET="CHANGE_ME_MERCURE_JWT_SECRET"
###< symfony/mercure-bundle ###

###> symfony/mailer ###
# SMTP para envío de correos
# Formato: smtp://USER:PASSWORD@HOST:PORT?encryption=tls
MAILER_DSN=smtp://user:password@smtp.example.com:587?encryption=tls
# Para desarrollo: MAILER_DSN=null://null
###< symfony/mailer ###

###> symfony/notifier ###
# Meta WhatsApp Business API
# Formato: meta-whatsapp://ACCESS_TOKEN@default?phone_number_id=PHONE_ID
WHATSAPP_PRIMARY_DSN=meta-whatsapp://CHANGE_ME_ACCESS_TOKEN@default?phone_number_id=CHANGE_ME_PHONE_ID
WHATSAPP_BACKUP_DSN=meta-whatsapp://CHANGE_ME_ACCESS_TOKEN@default?phone_number_id=CHANGE_ME_PHONE_ID

# Configuración de reintentos WhatsApp
WHATSAPP_MAX_RETRIES=5
WHATSAPP_FAILOVER_THRESHOLD=3

# Token de verificación webhook WhatsApp
# Generar con: openssl rand -base64 48 | tr -d '/+='
WHATSAPP_WEBHOOK_VERIFY_TOKEN=CHANGE_ME_WEBHOOK_TOKEN

# Telegram Bot (opcional)
# TELEGRAM_DSN=telegram://BOT_TOKEN@default?channel=CHAT_ID
###< symfony/notifier ###

###> monitoring (opcional) ###
# Prometheus y Alertmanager URLs
PROMETHEUS_URL=http://localhost:9090
ALERTMANAGER_URL=http://localhost:9093
###< monitoring ###

# =============================================================================
# NOTAS DE SEGURIDAD:
# - NUNCA commitear el archivo .env con valores reales
# - Usar diferentes valores para desarrollo y producción
# - Rotar credenciales periódicamente
# - Las claves JWT deben generarse con:
#   openssl genpkey -algorithm RSA -out config/jwt/private.pem -pkeyopt rsa_keygen_bits:4096
#   openssl rsa -pubout -in config/jwt/private.pem -out config/jwt/public.pem
# =============================================================================
